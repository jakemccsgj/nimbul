<% fields_for "load_balancer[load_balancer_listener_attributes][]", load_balancer_listener do |f| %>
  <% content_tag_for :tr, load_balancer_listener do %>
    <td>
      <% unless load_balancer_listener.new_record? %>
        <%= f.hidden_field :id, :index => nil %>
      <% end %>
      <%= f.select :protocol, ELB_TARGET_PROTOCOL_NAMES, :index => nil %>
    </td>
    <td>
      <%= f.text_field :load_balancer_port, :class => :short, :index => nil %>
    </td>
    <td>
      <%= f.select :instance_protocol, ELB_TARGET_PROTOCOL_NAMES, :index => nil %>
    </td>
    <td>
      <%= f.text_field :instance_port, :class => :short, :index => nil %>
    </td>
    <td>
      <% if load_balancer_listener.new_record? %>
        <%= link_to_function 'remove', "$(this).up('.load_balancer_listener').remove()"%>
      <% else %>
        <%= link_to_function 'remove', "mark_for_destroy(this, $(this).up('.load_balancer_listener'))"%>
        <%= f.hidden_field :should_destroy, :index => nil, :class => 'should_destroy' %>
      <% end %>
    </td>
  <% end %>
<% end %>
